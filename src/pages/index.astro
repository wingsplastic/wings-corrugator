---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// 获取所有博客文章，并按时间倒序排列
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Company News | Wings Plastic">
	<main class="max-w-4xl mx-auto py-12 px-4">
		<h1 class="text-4xl font-bold mb-8 text-center">Company News</h1>
		
		<div class="grid gap-8 md:grid-cols-2">
			{posts.map((post) => (
				<article class="border rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition">
					<a href={`/blog/${post.slug}/`}>
						{post.data.heroImage && (
							<img width={720} height={360} src={post.data.heroImage} alt="" class="w-full h-48 object-cover" />
						)}
						<div class="p-6">
							<h3 class="text-xl font-bold mb-2 text-blue-900">{post.data.title}</h3>
							<p class="text-gray-500 text-sm mb-4">
								{post.data.pubDate.toLocaleDateString('en-us', {
									year: 'numeric',
									month: 'short',
									day: 'numeric',
								})}
							</p>
							<p class="text-gray-700 line-clamp-3">
                                {post.body.slice(0, 100)}...
                            </p>
						</div>
					</a>
				</article>
			))}
		</div>
	</main>
</Layout>